FROM registry.docker.aws-us-west-2-infrastructure.socrata.net:5000/internal/secondary-watcher:0.7.18_2592_e43b7b4e

ENV SECONDARY_ARTIFACT store-bq-assembly.jar
ENV SECONDARY_CONFIG secondary.conf

ENV BQ_SECONDARY_NUM_WORKERS 1
ENV BQ_SECONDARY_WORK_MEM 768MB
ENV BQ_SECONDARY_TABLESPACE_FN nil

ENV PG_SECONDARY_DB_NAME falth
ENV PG_SECONDARY_DB_PORT 5432
ENV PG_SECONDARY_DB_USER soda_store

WORKDIR $SERVER_ROOT

COPY ${SECONDARY_CONFIG}.j2 $SERVER_ROOT/
COPY $SECONDARY_ARTIFACT $SERVER_ROOT/plugins/
