# TODO include specific version number to depend on
FROM secondary-watcher

# TODO expose JMX
# EXPOSE 

ENV SECONDARY_ARTIFACT store-pg-assembly.jar
ENV SECONDARY_CONFIG secondary.conf

ENV PG_SECONDARY_DB_NAME falth
ENV PG_SECONDARY_DB_PORT 5432
ENV PG_SECONDARY_DB_USER soda_query
ENV PG_SECONDARY_INSTANCE pg
ENV PG_SECONDARY_NUM_WORKERS 5
ENV PG_SECONDARY_TABLESPACE_FN nil

WORKDIR $SERVER_ROOT

COPY ${SECONDARY_CONFIG}.j2 $SERVER_ROOT/
COPY $SECONDARY_ARTIFACT $SERVER_ROOT/plugins/
